# Xserpy

Python implementation of Shift-Reduce semantic parser: http://ceur-ws.org/Vol-1180/CLEF2014wn-QA-XuEt2014.pdf

Main script is ``convert_question.py`` - converts i-th question in dataset to a SPARQL query.

To retrain the model, you need to regenerate the data files as listed below.

## Data Files

  * ``data/pos_tagged_*.pickle``, ``data/ner_tagged_*.pickle`` - generated by specialized annotate/feature_constructor.py functions
  * ``data/phrase_detect_features_*_arr.pickle`` - generated by annotate/feature_constructor.py main
  * ``data/free917.*.examples.canonicalized.json`` - training and testing dataset
  * ``data/labels_*_*.pickle`` - labels of words, not split according to questions
  * ``data/questions_*_*.pickle`` - labels of words, split according to questions

## Model Files

  * ``models/w_*_i*.pickle`` - generated by phrase_detector.py main
  * ``models/w_dag*_*.pickle`` - generated by shift_reduce.py main
  * ``models/w_qint.pickle`` - generated by query_instantiate.py main

## Phases

  * **annotate.feature_constructor** - generate question sentence features
  * **phrase_detection.phrase_detector** - classify question tokens into classes
  * **shift_reduce.shift_reduce** - generate a parse DAG from classified tokens
  * **query_intention.query_instantiate** - label the DAG edges and nodes to correspond to a logical form (objects, predicates, relation names)
  * **structured_query** - convert the DAG to a SPARQL query

 ## Credits
  * **https://github.com/pks/rebol** - for answers for Free917 questions
